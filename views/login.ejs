<%- include('partials/header.ejs') %>

<div class="login-container" id="page_login">
  <div class="login-content">
    <wa-card style="border-color: var(--theme-color)">
      <center>
        <img src="/public/v<%= version %>/images/passweaver-icon-dark.png" width="60"></img>
        <p style="font-size:200%;">PassWeaver - <%- company_name %></p>
      </center>
      <br/>
      <form id="loginForm" action="access" method="post" class="wa-stack">
        <%- include('partials/csrf.ejs') %>
        <wa-input type="text" autofocus id="username" name="username" label="User" required autocomplete="username"></wa-input>
        <wa-input type="password" id="password" name="password" label="Password" required></wa-input>
        <% if ( viewitem ) { %>
          <input id="viewitem" name="viewitem" type="hidden" value="<%= viewitem %>"></input>
        <% } %>
        <center>
          <wa-button id="login" type="submit" variant="brand" style="margin-top:1rem;">Login</wa-button>
          <% if ( google_oauth2_enabled ) { %>
            <wa-divider></wa-divider>
            - or -
            <br/>
            <wa-button id="glogin" type="button" variant="brand" style="margin-top:1rem;">Login with Google
              <wa-icon slot="start" family="brands" name="google"></wa-icon>
            </wa-button>
          <% } %>
          <% if ( error ) { %>
            <br/><br/>
            <wa-callout variant="danger" open>
              <wa-icon slot="icon" name="circle-exclamation"></wa-icon>
              <%= error %>
            </wa-callout>
          <% } %>
        </center>
      </form>
    </wa-card>
  </div>
</div>

<script defer type="module" src="/public/v<%= version %>/js/login.js"></script>

<%- include('partials/footer.ejs') %>